effect give @e[type=#core:stabbable,type=!#core:undead,distance=..3,limit=1] instant_damage 1 0 true
effect give @e[type=#core:undead,distance=..3,limit=1] instant_health 1 0 true

kill @s